<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>项目总结 | v3shop</title>
    <meta name="description" content="v3shop文档">
    <link rel="stylesheet" href="/v3shop/assets/style.b37dd95f.css">
    <link rel="modulepreload" href="/v3shop/assets/plugin-vue_export-helper.abe1cdd2.js">
    <link rel="modulepreload" href="/v3shop/assets/Home.71a305cd.js">
    <link rel="modulepreload" href="/v3shop/assets/AlgoliaSearchBox.817705f6.js">
    <link rel="modulepreload" href="/v3shop/assets/v3shop_mds_10.end.md.ffa8996a.lean.js">
    <link rel="modulepreload" href="/v3shop/assets/app.df24174b.js">
    
    <meta name="twitter:title" content="项目总结 | v3shop">
  <meta property="og:title" content="项目总结 | v3shop">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/v3shop/" aria-label="v3shop, back to home" data-v-675d8756 data-v-4a583abe><!----> v3shop</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/v3shop/" data-v-b8818f8c>Guide <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/v3shop/config/basics" data-v-b8818f8c>Config Reference <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/v3shop/" data-v-b8818f8c>Guide <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/v3shop/config/basics" data-v-b8818f8c>Config Reference <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/v3shop/v3shop/mds/mds">v3shop</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/v3shop/v3shop/mds/1.intro.html">1.技术栈</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/v3shop/v3shop/mds/2.started.html">2.项目起步</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/v3shop/v3shop/mds/3.home.html">3.首页模块</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/v3shop/v3shop/mds/4.category.html">4.商品分类</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/v3shop/v3shop/mds/5.detail.html">5.商品详情</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/v3shop/v3shop/mds/6.login.html">6.登录模块</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/v3shop/v3shop/mds/7.cart.html">7.购物车</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="项目总结" tabindex="-1">项目总结 <a class="header-anchor" href="#项目总结" aria-hidden="true">#</a></h1><h2 id="业务总结" tabindex="-1">业务总结 <a class="header-anchor" href="#业务总结" aria-hidden="true">#</a></h2><h4 id="_01-首页" tabindex="-1">01-首页 <a class="header-anchor" href="#_01-首页" aria-hidden="true">#</a></h4><ul><li>mockjs模拟数据+骨架屏+数据懒加载+图片懒加载+轮播图组件</li></ul><h4 id="_02-分类" tabindex="-1">02-分类 <a class="header-anchor" href="#_02-分类" aria-hidden="true">#</a></h4><ul><li>复选框组件+面包屑组件+无限加载组件</li></ul><h4 id="_03-商品详情" tabindex="-1">03-商品详情 <a class="header-anchor" href="#_03-商品详情" aria-hidden="true">#</a></h4><ul><li>商品图预览组件+<strong>SKU组件</strong>+数量选择组件+按钮组件</li></ul><h4 id="_04-购物车" tabindex="-1">04-购物车 <a class="header-anchor" href="#_04-购物车" aria-hidden="true">#</a></h4><ul><li>本地购物车+服务端购物车</li></ul><h4 id="_05-结算-支付" tabindex="-1">05-结算&amp;支付 <a class="header-anchor" href="#_05-结算-支付" aria-hidden="true">#</a></h4><ul><li>对话框组件 + 支付宝沙箱支付</li></ul><h4 id="_06-订单管理" tabindex="-1">06-订单管理 <a class="header-anchor" href="#_06-订单管理" aria-hidden="true">#</a></h4><ul><li>标签页组件 + 步骤条组件</li></ul><h2 id="vue-3-0" tabindex="-1">VUE 3.0 <a class="header-anchor" href="#vue-3-0" aria-hidden="true">#</a></h2><h4 id="_01-踩过的坑" tabindex="-1">01-踩过的坑 <a class="header-anchor" href="#_01-踩过的坑" aria-hidden="true">#</a></h4><p><strong>问题01：</strong><code>currentRoute</code>已经是<code>ref</code>包装的数据类型</p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">/* vue2.0 版本用法 */</span>
router<span class="token punctuation">.</span>currentRoute<span class="token punctuation">.</span>fullPath
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre><code><span class="token comment">/* vue3.0 版本用法 */</span>
router<span class="token punctuation">.</span>currentRoute<span class="token punctuation">.</span>value<span class="token punctuation">.</span>fullPath
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>问题02：</strong><code>&lt;style scoped&gt;</code> 中 <code>@keyframes</code> 动画序列 <code>vue-cli</code> 编译后异常 参考<a href="https://github.com/vuejs/vue-loader/issues/1807" target="_blank" rel="noopener noreferrer">issues</a></p><p>编译前代码：</p><div class="language-css line-numbers-mode"><pre><code><span class="token selector">&lt;style scoped lang=&quot;less&quot;&gt;
.order-list</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> test 4s infinite<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@keyframes</span> test</span> <span class="token punctuation">{</span>
  <span class="token selector">0%</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">100%</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
&lt;/style&gt;
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>编译后代码：</p><div class="language-css line-numbers-mode"><pre><code><span class="token selector">.order-list</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> test-7dc8ef14 4s infinite<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@keyframes</span> test-7dc8ef14</span> <span class="token punctuation">{</span>
  <span class="token selector">0%[7dc8ef14]</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">100%[7dc8ef14]</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>处理方案：</p><ul><li>第一种：定义为全局样式，注意序列名称，别被覆盖即可。</li><li>第二种：安装 <code>@vue/compiler-sfc</code> 为 <code>3.0.1</code> 版本。</li></ul><p><strong>问题03：</strong> <code>&lt;style scoped vars={color} &gt;</code> 给style传入变量，开发环境好使，生成环境失败。</p><p>编译前代码：</p><div class="language-vue line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;#000000&#39;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> color <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">vars</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{color}</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">.box</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--color<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><code>npm run serve</code> 编译后代码：</p><div class="language-css line-numbers-mode"><pre><code><span class="token selector">element.style</span> <span class="token punctuation">{</span>
    <span class="token property">--60f10c3c-color</span><span class="token punctuation">:</span> #000000<span class="token punctuation">;</span>	
<span class="token punctuation">}</span>
<span class="token selector">.box</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--60f10c3c-color<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>npm run build</code> 编译后代码：</p><div class="language-css line-numbers-mode"><pre><code><span class="token selector">element.style</span> <span class="token punctuation">{</span>
    <span class="token property">--60f10c3c-color</span><span class="token punctuation">:</span> #000000<span class="token punctuation">;</span>	
<span class="token punctuation">}</span>
<span class="token selector">.box</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--color<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>处理方案：</p><ul><li>第一种：不使用<code>vars</code>新特性，自己通过 <code>:style</code> 绑定样式。</li><li>第二种：官方最新特性中已经采用 <code>v-bind</code> 在css中使用变量，参考 <a href="https://github.com/vuejs/rfcs/blob/style-vars-2/active-rfcs/0000-sfc-style-variables.md" target="_blank" rel="noopener noreferrer">RFCS</a></li></ul><p><strong>问题4：</strong> <code>vue-router-next</code> 中 <code>router-link-active</code> 的追加条件更加苛刻。</p><p>vue2.0 中：</p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// 路由规则</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token string">&#39;/orders&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> OrderList<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&#39;/orders/:id&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> OrderDetail<span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-vue line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/orders<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>订单列表<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>当路由地址是 <code>/orders/10086</code> 的时候 <code>router-link</code> 解析后会追加 <code>router-link-acitve</code> 类名</p><p>vue3.0 中：</p><p>当路由地址是 <code>/orders/10086</code> 的时候 <code>router-link</code> 解析后<strong>不会</strong>追加 <code>router-link-acitve</code> 类名</p><p>参考 <a href="https://github.com/vuejs/rfcs/blob/master/active-rfcs/0028-router-active-link.md#unrelated-but-similiar-routes" target="_blank" rel="noopener noreferrer">RFCS</a></p><p><img src="/v3shop/assets/1617803697207.43fe9fc6.png" alt="1617803697207"></p><h4 id="_02-关注功能" tabindex="-1">02-关注功能 <a class="header-anchor" href="#_02-关注功能" aria-hidden="true">#</a></h4><blockquote><p>VUE3.0 值的关注的<a href="https://v3.vuejs.org/guide/migration/introduction.html#notable-new-features" target="_blank" rel="noopener noreferrer">新特性</a></p></blockquote><p><img src="/v3shop/assets/1617636441046.e1254139.png" alt="1617636441046"></p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><p class="last-updated" data-v-fb8d84c6 data-v-5797b537><span class="prefix" data-v-5797b537>上次更新:</span><span class="datetime" data-v-5797b537></span></p></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"88d412f3\",\"v3shop_mds_1.intro.md\":\"233484c2\",\"v3shop_mds_10.end.md\":\"ffa8996a\",\"v3shop_mds_2.started.md\":\"51df1292\",\"v3shop_mds_3.home.md\":\"23fff8e4\",\"v3shop_mds_4.category.md\":\"b9ec0dfb\",\"v3shop_mds_5.detail.md\":\"bed0cd0e\",\"v3shop_mds_6.login.md\":\"81496282\",\"v3shop_mds_7.cart.md\":\"f8eacd7d\",\"v3shop_mds_8.pay.md\":\"2e523f0d\",\"v3shop_mds_9.member.md\":\"7e670b18\"}")</script>
    <script type="module" async src="/v3shop/assets/app.df24174b.js"></script>
    
  </body>
</html>